<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PG Owner Dashboard</title>
  <!-- Google Fonts & Font Awesome -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>
  <!-- Bootstrap (for profile grid) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <!-- Unified CSS -->
  <link rel="stylesheet" href="style.css"/>
  <style> 
  /* ========================== */
/* RESET & GLOBAL STYLES     */
/* ========================== */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Poppins', sans-serif;
}

body {
  background: #121926;
  color: #fff;
  display: flex;
}

a {
  text-decoration: none;
  color: inherit;
}


/* ========================== */
/* TOPBAR                     */
/* ========================== */
.topbar {
  background: #1a2238;
  padding: 10px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 1100;
}

.topbar-left {
  display: flex;
  align-items: center;
  gap: 15px;
}

.logo {
  font-size: 20px;
  font-weight: bold;
  color: #fff;
}

.logo span {
  color: #4B47D9;
}

.subtitle {
  font-size: 12px;
  color: #aaa;
}

.hamburger {
  font-size: 22px;
  cursor: pointer;
  display: none;
}

@media (max-width: 768px) {
  .hamburger {
    display: block;
  }
}

.topbar-right {
  display: flex;
  align-items: center;
  gap: 10px;
}

.greeting {
  font-size: 16px;
  font-weight: 600;
  display:block;
  margin-right:40px;
}

.topbar-profile {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
}


/* ========================== */
/* SIDEBAR                    */
/* ========================== */
.sidebar {
  width: 250px;
  height: 100vh;
  background: #1a2238;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding: 20px 0;
  position: fixed;
  top: 0;
  left: 0;
  transition: .3s;
  z-index: 1000;
}

.sidebar .logo {
  text-align: center;
  font-size: 24px;
  font-weight: bold;
  color: #fff;
  margin-bottom: 10px;
}

.sidebar .logo span {
  color: #4B47D9;
}

.sidebar .subtitle {
  font-size: 12px;
  color: #aaa;
}

.nav-links {
  list-style: none;
  padding-left: 20px;
  margin-top: 30px;
}

.nav-links li {
  margin-bottom: 20px;
}

.nav-links a {
  display: flex;
  align-items: center;
  gap: 15px;
  color: #c0c0c0;
  font-size: 16px;
  padding: 10px;
  border-radius: 12px;
  transition: .3s;
}

.nav-links a:hover {
  background: #4B47D9;
  color: #fff;
}

.logout {
  padding-left: 20px;
  margin-bottom: 20px;
}

.logout a {
  display: flex;
  align-items: center;
  gap: 10px;
  color: #c0c0c0;
}

.logout a:hover {
  color: #fff;
}

@media (max-width: 768px) {
  .sidebar {
    left: -260px;
  }

  .sidebar.active {
    left: 0;
  }
}


/* ========================== */
/* MAIN CONTENT               */
/* ========================== */
.main-content {
  margin-top: 60px;
  margin-left: 250px;
  padding: 20px;
  width: calc(100% - 250px);
}

@media (max-width: 768px) {
  .main-content {
    margin-left: 0;
    width: 100%;
  }

  .section {
    margin-bottom: 40px;
  }
}


/* ========================== */
/* OVERVIEW SECTION           */
/* ========================== */
.overview-topbar {
  background: #1a2238;
  border-radius: 12px;
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

@media (min-width: 768px) {
  .overview-topbar {
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
  }
}

.welcome {
  font-size: 24px;
  font-weight: bold;
}

.welcome-message {
  font-size: 14px;
  color: #a0a0a0;
}

.add-pg-btn {
  background: #4B47D9;
  color: #fff;
  border: none;
  padding: 10px 20px;
  border-radius: 10px;
  cursor: pointer;
  font-weight: bold;
}

.stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
  margin-top: 30px;
}

.card {
  background: #1a2238;
  padding: 20px;
  border-radius: 12px;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.card h4 {
  color: #c0c0c0;
  margin-bottom: 10px;
}

.count {
  font-size: 28px;
  font-weight: bold;
}

.icon {
  font-size: 28px;
  margin-top: 10px;
  color: #4B47D9;
}


/* ========================== */
/* ADD PG SECTION             */
/* ========================== */
.add-pg h2 {
  margin-bottom: 20px;
  font-size: 24px;
}

.container-pg {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.two-columns {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

@media (min-width: 768px) {
  .two-columns {
    flex-direction: row;
  }

  .left-column,
  .right-column {
    flex: 1;
  }
}

.form-section,
.media-section,
.contact-section {
  background: #1a2238;
  border-radius: 12px;
  padding: 20px;
}

.media-section{
  margin-bottom: 20px;
}

.form-section{
  margin-bottom: 20px;
}


.form-section h3,
.media-section h3,
.contact-section h3 {
  margin-bottom: 15px;
  font-size: 18px;
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 15px;
}

.form-group input,
.form-group textarea,
.form-group select {
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #444;
  background: #1e1e2f;
  color: #fff;
  font-size: 14px;
  outline: none;
}

.form-group textarea {
  resize: vertical;
}

input::placeholder,
textarea::placeholder {
  color: #aaaaaa;
}

.amenities {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
}

.checkbox-group label {
  display: flex;
  align-items: center;
  gap: 5px;
  font-size: 14px;
}

.checkbox-group input {
  accent-color: #4B47D9;
}

.button-group {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 20px;
}

button {
  background: #4B47D9;
  color: #fff;
  padding: 10px 20px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
}


/* ========================== */
/* PROFILE SECTION            */
/* ========================== */
.profile-card {
  background: linear-gradient(135deg, #4B47D9, #5e58e3);
  border-radius: 20px;
  padding: 30px 20px;
  color: #fff;
}

.card-section {
  background: #2c2f3a;
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.form-control,
.form-select {
  background: #363a45;
  border: none;
  color: #fff;
}

.form-control:focus,
.form-select:focus {
  background: #414653;
  border-color: #4B47D9;
  box-shadow: none;
  color: #fff;
}

label {
  color: #bfc5d0;
  font-weight: 500;
}

.btn-main {
  background: #4B47D9;
  color: #fff;
  border: none;
  padding: 10px 20px;
  border-radius: 10px;
}

.btn-main:hover {
  background: #5f5cff;
}

.section-title {
  font-size: 1.2rem;
  font-weight: 600;
  margin-bottom: 15px;
  color: #fff;
}

.switch {
  transform: scale(1.2);
}

/* -------------style for manage listings--------------- */
:root {
            --bg: #1b1f2a;
            --card: #23283f;
            --text: #e0e0e0;
            --muted: #888;
            --primary: #4B47D9;
            --success: #27ae60;
            --warning: #f1c40f;
            --danger: #e74c3c;
            --hover: rgba(255,255,255,0.05);
        }
        * { box-sizing: border-box; }
        body {
            margin: 0;
            padding: 20px;
            background: var(--bg);
            color: var(--text);
            font-family: sans-serif;
            line-height: 1.4;
        }

        /* Outer Box */
        .box {
            background: var(--card);
            border-radius: 8px;
            padding: 20px;
            max-width: 100%;
            overflow: hidden;
            margin-bottom: 20px;
        }

        /* Filter Row */
        .filters {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        .filters select,
        .filters input {
            background: var(--bg);
            border: none;
            color: var(--text);
            padding: 10px;
            border-radius: 6px;
            font-size: 0.9rem;
        }
        .filters input { flex: 1; }

        /* Table Container */
        .table-wrapper {
            overflow-x: auto;
            border-radius: 6px;
            background: var(--bg);
        }
        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 800px;
        }
        thead { background: rgba(255,255,255,0.05); }
        th, td {
            padding: 12px 10px;
            text-align: left;
            font-size: 0.9rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            vertical-align: middle; /* Ensure vertical centering of cell content */
        }
        th { font-weight: 500; text-transform: uppercase; font-size: 0.75rem; color: var(--muted); }

        /* Avatar cell */
        .avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 8px;
        }

        .navbar-avatar {
           position: absolute;
           right: 20px;
           top: 50%;
           transform: translateY(-50%);
        }

        .pg-name { display: flex; align-items: center; }
        .pg-id {
            display: block;
            font-size: 0.75rem;
            color: var(--muted);
            margin-left: 40px; /* align under name */
        }

        /* Status badges */
        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            text-transform: capitalize;
            color: white;
        }
        .badge.active { background: var(--success); }
        .badge.inactive { background: var(--danger); }
        .badge.pending { background: var(--warning); color: black; }

        /* Action buttons */
        .actions {
            display: flex;
            gap: 8px;
            align-items: center; /* Vertically center the buttons */
        }
        .actions button {
            background: var(--card); /* Better contrast */
            border: none;
            padding: 6px;
            border-radius: 4px;
            cursor: pointer;
            color: var(--text);
            font-size: 1rem;
            transition: background 0.2s;
            line-height: 1; /* Ensure consistent line height for icons */
        }
        .actions button i {
            vertical-align: middle; /* Vertically align icons within buttons */
        }
        .actions button:hover { background: var(--hover); }

        /* Pagination */
        .pagination {
            display: flex;
            list-style: none;
            padding: 0;
            margin: 20px 0 0;
            gap: 8px;
            justify-content: flex-end;
        }
        .pagination li { display: inline; }
        .pagination button {
            background: var(--bg);
            border: none;
            color: var(--text);
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
        }
        .pagination .active {
            background: var(--primary);
            color: white;
        }
        .pagination button:disabled {
            opacity: 0.4;
            cursor: default;
        }
        @media (max-width: 600px) {
            .filters { flex-direction: column; }
            .filters input { order: -1; }
        }
/* ----------------------------------------------------- */

  </style>
</head>
<body>

  <!-- Topbar -->
  <div class="topbar">
    <div class="topbar-left">
      <div class="hamburger" onclick="toggleSidebar()">
        <i class="fas fa-bars"></i>
      </div>
      <div>
        <div class="logo">PG <span>Portal</span></div>
        <div class="subtitle">Dashboard</div>
      </div>
    </div>
    <div class="topbar-right">
      <span class="greeting" id="greeting-name">Hi, </span>
       <!-- <img src="https://via.placeholder.com/32" alt="Profile Picture" class="topbar-profile"/> --> 
      <div class="navbar-avatar" id="userAvatarNav" style="
      width: 40px;
      height: 40px;
      background-color: #4B47D9;  /* Royal Blue */
      color: #FFD700;             /* Golden */
      font-size: 1.2rem;
      font-weight: bold;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-left: auto;
      cursor: pointer;
      box-shadow: 0 0 3px rgba(0,0,0,0.2);
    ">
      <!-- First letter will be injected via JS -->
    </div>
    
    </div>
  </div>

  <!-- Sidebar -->
  <nav class="sidebar" id="sidebar">
    <div>
      <div class="logo">
        PG <span>Portal</span>
        <div class="subtitle"></div>
      </div>
      <ul class="nav-links">
        <li><a href="#overview"><i class="fas fa-home"></i>Dashboard </a></li>
        <li><a href="#add-pg"><i class="fas fa-plus"></i> Add PG</a></li>
        <li><a href="#manage"><i class="fas fa-lock"></i> Manage Listings</a></li>
        <li><a href="#profile"><i class="fas fa-user"></i> Profile</a></li>
      </ul>
    </div>
    <div class="logout">
      <a href="index.html"><i class="fas fa-right-from-bracket" id="logoutBtn"></i> Logout</a>
    </div>
   
  </nav>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Overview -->
    <section id="overview" class="section overview">
      <div class="overview-topbar">
        <div>
          <div class="welcome">Welcome Back,</div>
          <div class="welcome-message">Here's what's happening with your PG properties today.</div>
        </div>
        <!-- <button class="add-pg-btn">+ Add PG</button> -->
      </div>
      <div class="stats">
        <div class="card">
          <h4>Total PGs</h4>
          <div class="count">0</div>
          <i class="fas fa-home icon"></i>
        </div>
        <div class="card">
          <h4>Total Views</h4>
          <div class="count">0</div>
          <i class="fas fa-eye icon"></i>
        </div>
        <div class="card">
          <h4>Likes</h4>
          <div class="count">0</div>
          <i class="fas fa-heart icon"></i>
        </div>
        <!--<div class="card">
          <h4>Inquiries</h4>
          <div class="count">0</div>
          <i class="fas fa-comment-dots icon"></i>
        </div>-->
      </div>
    </section>

    <!-- Add PG -->
    <section id="add-pg" class="section add-pg">
      <h2>Add New PG</h2>
      <div class="container-pg">
        <div class="two-columns">
          <div class="left-column">
            <div class="form-section">
              <h3>PG Details</h3>
              <div class="form-group">
                <input type="text" placeholder="Enter PG name"/>
                <select><option>Select PG type</option></select>
                <textarea rows="3" placeholder="Describe your PG accommodation"></textarea>
              </div>
              <h3>Location</h3>
              <div class="form-group">
                <input type="text" placeholder="City"/>
                <input type="text" placeholder="Area/Locality"/>
                <input type="text" placeholder="Enter complete address"/>
              </div>
              <h3>Pricing</h3>
              <div class="form-group">
                <input type="number" placeholder="e.g. 8000 (Monthly Rent)"/>
                <input type="number" placeholder="e.g. 10000 (Security Deposit)"/>
                <input type="number" placeholder="e.g. 5 (Discount %)"/>
              </div>
              <h3>Amenities</h3>
              <div class="amenities checkbox-group">
                <label><input type="checkbox"/> WiFi</label>
                <label><input type="checkbox"/> Air Conditioning</label>
                <label><input type="checkbox"/> Power Backup</label>
                <label><input type="checkbox"/> Food Included</label>
                <label><input type="checkbox"/> TV</label>
                <label><input type="checkbox"/> Parking</label>
                <label><input type="checkbox"/> Laundry</label>
                <label><input type="checkbox"/> Gym</label>
              </div>
              <h3>Room Details</h3>
              <div class="form-group">
                <input type="text" placeholder="Number of single rooms"/>
                <input type="text" placeholder="Number of double rooms"/>
                <input type="text" placeholder="Number of triple rooms"/>
              </div>
              <h3>Rules & Policies</h3>
              <div class="form-group">
                <textarea placeholder="Enter house rules"></textarea>
                <input type="number" placeholder="e.g. 30 (Notice Period Days)"/>
                <label><input type="checkbox"/> Activate Listing</label>
              </div>
            </div>
          </div>
          <div class="right-column">
            <div class="media-section">
              <h3>Media & Actions</h3>
              <div class="form-group">
                <input type="file" id="pgImages" name="images[]" multiple accept="image/*" />
                <input type="text" placeholder="Paste Google map address link" id="video_link"/>
              </div>
            </div>
            <div class="contact-section">
              <h3>Contact Information</h3>
              <div class="form-group">
                <input type="text" placeholder="Enter Your Name"/>
                <input type="text" placeholder="Phone Number"/>
              </div>
              <div class="button-group">
                <button>+ Add PG Listing</button>
                <!-- <button>Save as Draft</button> -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
<!-------------------Manage listings code ----------------->
<section id="manage">
<div class="box">
  <div class="filters">
      <select>
          <option>All Status</option>
          <option>Verified</option>
          <option>Unverified</option>
      </select>
      <select>
          <option>All Cities</option>
          <option>Bangalore</option>
          <option>Delhi</option>
          <option>Mumbai</option>
      </select>
      <select>
        <option>All Types</option>
        <option>Boys PG</option>
        <option>Girls PG</option>
        <option>Co‑ed PG</option>
        <option>Hostel</option>
        <option>Apartment</option>
      </select>
      <input type="text" placeholder="Search properties…" />
  </div>

  <div class="table-wrapper">
      <table>
          <thead>
              <tr>
                  <th>PG Name</th>
                  <th>Location</th>
                  <th>Type</th>
                  <th>Rooms</th>
                  <th>Price (₹)</th>
                  <th>Status</th>
                  <!-- <th>Views</th> -->
                  <th>Actions</th>
              </tr>
          </thead>
          <tbody>
              <tr>
                  <td>
                      <div class="pg-name">
                          <div class="avatar">L</div>
                          Lotus PG
                      </div>
                      <span class="pg-id">ID: PG‑1001</span>
                  </td>
                  <td>Koramangala, Bangalore</td>
                  <td>Men's PG</td>
                  <td>12</td>
                  <td>8,500</td>
                  <td><span class="badge active">Verified</span></td>
                  <!-- <td>1,248</td> -->
                  <td class="actions">
                      <button title="Edit">
                          <i class="fas fa-edit"></i>
                      </button>
                      <button title="Delete">
                          <i class="fas fa-trash"></i>
                      </button>
                      <!-- <button title="View"> -->
                          <!-- <i class="fas fa-eye"></i> -->
                      <!-- </button> -->
                  </td>
              </tr>
              <tr>
                  <td>
                      <div class="pg-name">
                          <div class="avatar" style="background:#6c5ce7;">S</div>
                          Sunrise Residency
                      </div>
                      <span class="pg-id">ID: PG‑1002</span>
                  </td>
                  <td>HSR Layout, Bangalore</td>
                  <td>Women's PG</td>
                  <td>18</td>
                  <td>9,200</td>
                  <td><span class="badge active">Verified</span></td>
                  <!-- <td>986</td> -->
                  <td class="actions">
                      <button title="Edit">
                          <i class="fas fa-edit"></i>
                      </button>
                      <button title="Delete">
                          <i class="fas fa-trash"></i>
                      </button>
                      <!-- <button title="View"> -->
                          <!-- <i class="fas fa-eye"></i> -->
                      <!-- </button> -->
                  </td>
              </tr>
              <tr>
                  <td>
                      <div class="pg-name">
                          <div class="avatar" style="background:#00b894;">G</div>
                          Green Valley PG
                      </div>
                      <span class="pg-id">ID: PG‑1003</span>
                  </td>
                  <td>Whitefield, Bangalore</td>
                  <td>Family PG</td>
                  <td>8</td>
                  <td>12,500</td>
                  <td><span class="badge inactive">Unverified</span></td>
                  <!-- <td>532</td> -->
                  <td class="actions">
                      <button title="Edit">
                          <i class="fas fa-edit"></i>
                      </button>
                      <button title="Delete">
                          <i class="fas fa-trash"></i>
                      </button>
                      <!-- <button title="View"> -->
                          <!-- <i class="fas fa-eye"></i> -->
                      <!-- </button> -->
                  </td>
              </tr>
              </tbody>
      </table>
  </div>

  <ul class="pagination">
      <li><button disabled>Previous</button></li>
      <li><button class="active">1</button></li>
      <li><button>2</button></li>
      <li><button>Next</button></li>
  </ul>
 <!-- Edit Listing Modal (hidden by default) -->
<div id="editModal" class="modal" style="display:none;">
  <div class="modal-content" style="background: var(--card); padding:20px; border-radius:8px; max-width:500px; margin:100px auto; position:relative;">
    <span id="closeModal" style="position:absolute; top:10px; right:15px; cursor:pointer; font-size:20px;">&times;</span>
    <h2>Edit PG Listing</h2>
    <form id="editForm">
      <input type="hidden" id="editListingId" />
      <div style="margin-bottom:10px;">
        <label>PG Name:</label>
        <input type="text" id="editName" style="width:100%; padding:8px; margin-top:5px;" />
      </div>
      <div style="margin-bottom:10px;">
        <label>Location (City, Area):</label>
        <input type="text" id="editLocation" style="width:100%; padding:8px; margin-top:5px;" placeholder="City, Area" />
      </div>
      <div style="margin-bottom:10px;">
        <label>Type:</label>
        <!-- Dropdown for PG type with same options as the Add New PG section -->
        <select id="editType" style="width:100%; padding:8px; margin-top:5px;">
          <option value="Boys PG">Boys PG</option>
          <option value="Girls PG">Girls PG</option>
          <option value="Co-ed PG">Co-ed PG</option>
          <option value="Hostel">Hostel</option>
          <option value="Apartment">Apartment</option>
        </select>
      </div>
      <div style="margin-bottom:10px;">
        <label>Rooms:</label>
        <input type="number" id="editRooms" style="width:100%; padding:8px; margin-top:5px;" />
      </div>
      <div style="margin-bottom:10px;">
        <label>Rent (₹):</label>
        <input type="number" id="editRent" style="width:100%; padding:8px; margin-top:5px;" />
      </div>
      <div style="margin-bottom:10px;">
        <label>Status:</label>
        <select id="editStatus" style="width:100%; padding:8px; margin-top:5px;">
          <option value="Verified">Verified</option>
          <option value="Unverified">Unverified</option>
          <option value="Pending">Pending</option>
        </select>
      </div>
      <div style="text-align:right;">
        <button type="button" id="saveEditBtn" style="padding:8px 16px; background: var(--primary); color:#fff; border:none; border-radius:4px; cursor:pointer;">
          Save Changes
        </button>
      </div>
    </form>
  </div>
</div>
</div>
</section>
<!-----**********************************************------>
    <!-- Profile -->
    <section id="profile" class="section profile">
      <div class="container-fluid">
        <div class="row">
          <div class="col-md-3 mb-4">
            <div class="profile-card text-center" id="userProfileCard">
              <!-- Updated profile avatar container -->
              <div class="profile-avatar" id="userAvatar" style="
              width: 60px;
              height: 60px;
              background-color: #1A2238;   /* Royal blue */
              color: #FFD700;              /* Golden text */
              font-size: 1.6rem;
              font-weight: bold;
              border-radius: 50%;
              display: flex;
              align-items: center;
              justify-content: center;
              margin: 0 auto 10px auto;   /* Center horizontally */
              box-shadow: 0 0 5px rgba(0,0,0,0.2);
            ">
              <!-- First letter of user's name appears here -->
            </div>
            

              <h5 class="mb-0" id="profileName">Full Name Here</h5>
              <small class="text-light" id="profileRole">PG Property Owner</small>
              <hr class="bg-white"/>
              <p class="mb-1"><i class="fas fa-map-marker-alt"></i> <span id="profileCity">City, State</span></p>
              <p class="mb-1"><i class="fas fa-envelope"></i> <span id="profileEmail">example@example.com</span></p>
              <p class="mb-1"><i class="fas fa-phone"></i> <span id="profilePhone">+91 9988776655</span></p>
            </div>
          </div>
          <div class="col-md-9">
           <!-- Personal Information -->
<div class="card-section" id="personalInfo">
  <div class="section-title">Personal Information</div>
  <div class="row g-3">
    <div class="col-md-6">
      <label>First Name</label>
      <input type="text" class="form-control" placeholder="Enter First Name" id="first_name"/>
    </div>
    <div class="col-md-6">
      <label>Last Name</label>
      <input type="text" class="form-control" placeholder="Enter Last Name" id="last_name"/>
    </div>
    <div class="col-md-6">
      <label>Email</label>
      <input type="email" class="form-control" placeholder="Enter Your Email" id="email"/>
    </div>
    <div class="col-md-6">
      <label>Phone</label>
      <input type="tel" class="form-control" placeholder="Enter Your Phone No." id="phone"/>
    </div>
    <div class="col-md-6">
      <label>City</label>
      <input type="text" class="form-control" placeholder="Enter Your City" id="city"/>
    </div>
    <div class="col-md-6">
      <label>State</label>
      <select class="form-select" id="state">
        <option>Uttar Pradesh</option>
      </select>
    </div>
    <div class="col-md-12">
      <label>Full Address</label>
      <input type="text" class="form-control" placeholder="Enter Your Full Address with Pin code" id="address"/>
    </div>
    <div class="col-md-12">
      <label>About Me</label>
      <textarea class="form-control" rows="2" placeholder="Enter about your self......" id="about"></textarea>
    </div>
  </div>
  <div class="text-end mt-4">
    <button class="btn-main" id="savePersonalInfoBtn">Save Personal Information</button>
  </div>
</div>

<!-- Business Information -->
<div class="card-section" id="businessInfo">
  <div class="section-title">Business Information</div>
  <div class="row g-3">
    <div class="col-md-6">
      <label>Business Name</label>
      <input type="text" class="form-control" placeholder="Enter Your PG Name" id="business_name"/>
    </div>
    <div class="col-md-6">
      <label>Business Type</label>
      <select class="form-select" id="business_type">
        <option>Sole Proprietorship</option>
      </select>
    </div>
    <div class="col-md-6">
      <label>GST Number</label>
      <input type="text" class="form-control" placeholder="Enter GST no." id="gst_number"/>
    </div>
    <div class="col-md-6">
      <label>PAN Number</label>
      <input type="text" class="form-control" placeholder="Enter Pan Card no." id="pan_number"/>
    </div>
    <div class="col-md-12">
      <label>Business Address</label>
      <input type="text" class="form-control" placeholder="Enter Your Full Address with Pin code" id="business_address"/>
    </div>
  </div>
  <div class="text-end mt-4">
    <button class="btn-main" id="saveBusinessInfoBtn">Save Business Information</button>
  </div>
</div>


</section>
  </main>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // ===============================
      // 1. Sidebar Toggle
      // ===============================
      const sidebar = document.getElementById("sidebar");
      const hamburger = document.querySelector(".hamburger");
      if (hamburger) {
        hamburger.addEventListener("click", function () {
          sidebar.classList.toggle("active");
        });
      }
    
      // ===============================
      // 2. Auto-Populate PG Type Dropdown
      // ===============================
      const pgTypeSelect = document.querySelector("select");
      if (pgTypeSelect && pgTypeSelect.options.length <= 1) {
        const types = ["Boys PG", "Girls PG", "Co-ed PG", "Hostel", "Apartment"];
        types.forEach(function (type) {
          const option = document.createElement("option");
          option.value = type;
          option.textContent = type;
          pgTypeSelect.appendChild(option);
        });
      }
    
      // ===============================
      // 3. Save PG Listing with File Upload
      // ===============================
      async function savePGListing() {
        try {
          const amenities = Array.from(
            document.querySelectorAll(".checkbox-group input:checked")
          ).map(cb => cb.parentElement.textContent.trim());
    
          const formData = new FormData();
    
          formData.append("name", document.querySelector('input[placeholder="Enter PG name"]').value);
          formData.append("type", pgTypeSelect.value);
          formData.append("description", document.querySelector('textarea[placeholder="Describe your PG accommodation"]').value);
          formData.append("city", document.querySelector('input[placeholder="City"]').value);
          formData.append("area", document.querySelector('input[placeholder="Area/Locality"]').value);
          formData.append("address", document.querySelector('input[placeholder="Enter complete address"]').value);
          formData.append("rent", document.querySelector('input[placeholder*="Monthly Rent"]').value);
          formData.append("deposit", document.querySelector('input[placeholder*="Security Deposit"]').value);
          formData.append("discount", document.querySelector('input[placeholder*="Discount"]').value);
          formData.append("amenities", amenities.join(","));
          formData.append("rooms_single", document.querySelector('input[placeholder="Number of single rooms"]').value);
          formData.append("rooms_double", document.querySelector('input[placeholder="Number of double rooms"]').value);
          formData.append("rooms_triple", document.querySelector('input[placeholder="Number of triple rooms"]').value);
          formData.append("rules", document.querySelector('textarea[placeholder="Enter house rules"]').value);
          formData.append("notice_period", document.querySelector('input[placeholder*="Notice Period"]').value);
          formData.append("status", "published");
          formData.append("contact_person", document.querySelector('input[placeholder="Enter Your Name"]').value);
          formData.append("contact_phone", document.querySelector('input[placeholder="Phone Number"]').value);
          formData.append("video_link", document.getElementById("video_link").value);
    
          const imageFiles = document.getElementById("pgImages").files;
          for (let i = 0; i < imageFiles.length; i++) {
            formData.append("images[]", imageFiles[i]);
          }
    
          const res = await fetch("backend/pg/add_pg.php", {
            method: "POST",
            body: formData,
          });
    
          const result = await res.text();
          if (result.includes("success")) {
            alert("✅ PG added successfully into the database!");
            setTimeout(() => location.reload(), 1500);
          } else {
            alert("❌ Failed to add PG: " + result);
          }
        } catch (error) {
          alert("An error occurred: " + error.message);
        }
      }
    
      const addPgBtn = Array.from(document.querySelectorAll(".button-group button")).find(
        (btn) => btn.textContent.includes("+ Add PG Listing")
      );
      if (addPgBtn) {
        addPgBtn.addEventListener("click", savePGListing);
      }
    
      // ===============================
      // 4. Save Personal Information
      // ===============================
      const savePersonalInfoBtn = document.getElementById("savePersonalInfoBtn");
      if (savePersonalInfoBtn) {
        savePersonalInfoBtn.addEventListener("click", async function (e) {
          e.preventDefault();
          try {
            const personalData = {
              first_name: document.getElementById("first_name").value.trim(),
              last_name: document.getElementById("last_name").value.trim(),
              email: document.getElementById("email").value.trim(),
              phone: document.getElementById("phone").value.trim(),
              city: document.getElementById("city").value.trim(),
              state: document.getElementById("state").value,
              address: document.getElementById("address").value.trim(),
              about: document.getElementById("about").value.trim()
            };
    
            const response = await fetch("backend/profile/update_personal_info.php", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(personalData)
            });
    
            const result = await response.json();
            if (result.success) {
              alert("✅ Personal information updated successfully!");
              setTimeout(() => location.reload(), 1500);
            } else {
              alert("❌ Failed to update personal info: " + result.message);
            }
          } catch (error) {
            alert("An error occurred: " + error.message);
          }
        });
      }
    
      // ===============================
      // 5. Save Business Information
      // ===============================
      const saveBusinessInfoBtn = document.getElementById("saveBusinessInfoBtn");
      if (saveBusinessInfoBtn) {
        saveBusinessInfoBtn.addEventListener("click", async function (e) {
          e.preventDefault();
          try {
            const businessData = {
              business_name: document.getElementById("business_name").value.trim(),
              business_type: document.getElementById("business_type").value,
              gst_number: document.getElementById("gst_number").value.trim(),
              pan_number: document.getElementById("pan_number").value.trim(),
              business_address: document.getElementById("business_address").value.trim()
            };
    
            const response = await fetch("backend/profile/update_business_info.php", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(businessData)
            });
    
            const result = await response.json();
            if (result.success) {
              alert("✅ Business information updated successfully!");
              setTimeout(() => location.reload(), 1500);
            } else {
              alert("❌ Failed to update business info: " + result.message);
            }
          } catch (error) {
            alert("An error occurred: " + error.message);
          }
        });
      }
    
      // ===============================
      // 6. Load Profile Data (Card + Navbar Avatar)
      // ===============================
      async function loadProfileData() {
        try {
          const response = await fetch("backend/profile/get_profile_data.php");
          if (!response.ok) {
            const errorText = await response.text();
            throw new Error(errorText);
          }
    
          const data = await response.json();
          if (!data.success) {
            console.error("Profile load failed:", data.message);
            return;
          }
    
          const profile = data.profile;
    
          // Navbar Greeting
          const greeting = document.querySelector(".greeting");
          if (greeting) {
            greeting.textContent = profile.name?.trim()
              ? `Hi, ${profile.name}`
              : `Hi, ${profile.first_name || ""} ${profile.last_name || ""}`.trim();
          }
    
          // Profile Card Info
          document.getElementById("profileName").textContent =
            `${profile.first_name || ""} ${profile.last_name || ""}`.trim();
          document.getElementById("profileEmail").textContent = profile.email || "";
          document.getElementById("profilePhone").textContent = profile.phone || "";
          document.getElementById("profileCity").textContent =
            `${profile.city || ""}, ${profile.state || ""}`.trim();
    
          // First Letter Avatar
          const fullName = profile.name || `${profile.first_name || ""} ${profile.last_name || ""}`.trim();
          const firstLetter = fullName.charAt(0).toUpperCase();
    
          // Avatar in profile card
          const avatarCard = document.getElementById("userAvatar");
          if (avatarCard) {
            avatarCard.textContent = firstLetter;
          }
    
          // Avatar in top-right navbar
          const avatarNav = document.getElementById("userAvatarNav");
          if (avatarNav) {
            avatarNav.textContent = firstLetter;
          }
        } catch (error) {
          console.error("Failed to load profile data:", error.message);
        }
      }
    
      loadProfileData();
    });
    </script>
    
    
      
      <!----------Manage listings code----------->
      <script>
        document.addEventListener("DOMContentLoaded", function () {
          let listingsData = [];      // All listings fetched from backend
          let filteredData = [];      // Data after applying filters and search
          let currentPage = 1;
          const pageSize = 3;         // 3 listings per page
        
          // DOM Elements for table and pagination
          const tbody = document.querySelector("table tbody");
          const paginationUl = document.querySelector(".pagination");
          
          // Filter Elements – update these options in your HTML as needed!
          // Status Filter (same options as before)
          const filterStatus = document.querySelector(".filters select:nth-of-type(1)");
          // City Filter: update these options in HTML as well (if needed)
          const filterCity = document.querySelector(".filters select:nth-of-type(2)");
          // PG Type Filter: update options to match Add New PG section
          const filterType = document.querySelector(".filters select:nth-of-type(3)");
          // Search Box – now searches by PG name, city, or rent
          const searchInput = document.querySelector(".filters input");
        
          // ===============================
          // 1. Load Listings from Backend
          // ===============================
          async function loadListings() {
            try {
              const response = await fetch("backend/pg/get_listings.php");
              listingsData = await response.json();
              applyFilters(); // Apply filters and reset to page 1
            } catch (error) {
              console.error("Error fetching listings:", error);
            }
          }
        
          // ===============================
          // 2. Apply Filters & Search
          // ===============================
          function applyFilters() {
            filteredData = listingsData.filter(listing => {
              // Filter for status
              const statusFilter = filterStatus.value;
              let statusMatch = statusFilter === "All Status" || listing.status.toLowerCase() === statusFilter.toLowerCase();
        
              // Filter for city
              const cityFilter = filterCity.value;
              let cityMatch = cityFilter === "All Cities" || listing.city.toLowerCase() === cityFilter.toLowerCase();
        
              // Filter for type – using updated PG type options (e.g., Boys PG, Girls PG, Co‑ed PG, Hostel, Apartment)
              const typeFilter = filterType.value;
              let typeMatch = typeFilter === "All Types" || listing.type.toLowerCase() === typeFilter.toLowerCase();
        
              // Search keyword across PG name, city, and rent
              const searchKeyword = searchInput.value.trim().toLowerCase();
              let searchMatch = true; // default to true if no search keyword
              if (searchKeyword !== "") {
                // Check if searchKeyword is in name OR in city OR in rent (as string)
                searchMatch =
                  listing.name.toLowerCase().includes(searchKeyword) ||
                  listing.city.toLowerCase().includes(searchKeyword) ||
                  listing.rent.toString().includes(searchKeyword);
              }
        
              return statusMatch && cityMatch && typeMatch && searchMatch;
            });
            currentPage = 1; // Reset to the first page whenever filters change
            renderListings();
            renderPagination();
          }
        
          // Attach event listeners for filters and search input
          if (filterStatus) filterStatus.addEventListener("change", applyFilters);
          if (filterCity) filterCity.addEventListener("change", applyFilters);
          if (filterType) filterType.addEventListener("change", applyFilters);
          if (searchInput) searchInput.addEventListener("input", applyFilters);
        
          // ===============================
          // 3. Render Listings for Current Page
          // ===============================
          function renderListings() {
            tbody.innerHTML = ""; // Clear previous table rows
            const startIndex = (currentPage - 1) * pageSize;
            const endIndex = startIndex + pageSize;
            const pageListings = filteredData.slice(startIndex, endIndex);
        
            pageListings.forEach(listing => {
              const row = document.createElement("tr");
              row.innerHTML = `
                <td>
                  <div class="pg-name">
                    <div class="avatar">${listing.name.charAt(0).toUpperCase()}</div>
                    ${listing.name}
                  </div>
                  <span class="pg-id">ID: PG‑${listing.id}</span>
                </td>
                <td>${listing.city}, ${listing.area}</td>
                <td>${listing.type}</td>
                <td>${listing.rooms}</td>
                <td>${Number(listing.rent).toLocaleString("en-IN")}</td>
                <td>
                  <span class="badge ${listing.status.toLowerCase()}">
                    ${listing.status}
                  </span>
                </td>
                <td class="actions">
                  <button class="edit-btn" data-id="${listing.id}" title="Edit">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button class="delete-btn" data-id="${listing.id}" title="Delete">
                    <i class="fas fa-trash"></i>
                  </button>
                </td>
              `;
              tbody.appendChild(row);
            });
            attachActionHandlers();
          }
        
          // ===============================
          // 4. Render Pagination Controls
          // ===============================
          function renderPagination() {
            paginationUl.innerHTML = "";
            const totalPages = Math.ceil(filteredData.length / pageSize);
        
            // Previous Button
            const prevLi = document.createElement("li");
            const prevBtn = document.createElement("button");
            prevBtn.textContent = "Previous";
            prevBtn.disabled = (currentPage === 1);
            prevBtn.addEventListener("click", () => {
              currentPage--;
              renderListings();
              renderPagination();
            });
            prevLi.appendChild(prevBtn);
            paginationUl.appendChild(prevLi);
        
            // Page Number Buttons
            for (let i = 1; i <= totalPages; i++) {
              const pageLi = document.createElement("li");
              const pageBtn = document.createElement("button");
              pageBtn.textContent = i;
              if (i === currentPage) {
                pageBtn.classList.add("active");
              }
              pageBtn.addEventListener("click", () => {
                currentPage = i;
                renderListings();
                renderPagination();
              });
              pageLi.appendChild(pageBtn);
              paginationUl.appendChild(pageLi);
            }
        
            // Next Button
            const nextLi = document.createElement("li");
            const nextBtn = document.createElement("button");
            nextBtn.textContent = "Next";
            nextBtn.disabled = (currentPage === totalPages || totalPages === 0);
            nextBtn.addEventListener("click", () => {
              currentPage++;
              renderListings();
              renderPagination();
            });
            nextLi.appendChild(nextBtn);
            paginationUl.appendChild(nextLi);
          }
        
          // ===============================
          // 5. Attach Handlers for Edit and Delete Buttons
          // ===============================
          function attachActionHandlers() {
            // Delete Listing Handler
            document.querySelectorAll(".delete-btn").forEach(button => {
              button.addEventListener("click", function () {
                const id = this.getAttribute("data-id");
                if (confirm("Are you sure you want to delete this listing?")) {
                  deleteListing(id);
                }
              });
            });
            // Edit Listing Handler – opens edit modal
            document.querySelectorAll(".edit-btn").forEach(button => {
              button.addEventListener("click", function () {
                const id = this.getAttribute("data-id");
                openEditModal(id);
              });
            });
          }
        
          // ===============================
          // 6. Delete Listing Functionality
          // ===============================
          async function deleteListing(id) {
            try {
              const response = await fetch("backend/pg/delete_pg.php?id=" + id, {
                method: "DELETE"
              });
              const result = await response.text();
              if (result.includes("success")) {
                alert("Listing deleted successfully.");
                loadListings();
              } else {
                alert("Error deleting listing: " + result);
              }
            } catch (error) {
              alert("Error deleting listing: " + error.message);
            }
          }
        
          // ===============================
          // 7. Edit Modal Functionality
          // ===============================
          function openEditModal(id) {
            // Find listing in listingsData array
            const listing = listingsData.find(item => item.id == id);
            if (!listing) {
              alert("Listing not found!");
              return;
            }
            // Populate modal fields with listing data
            document.getElementById("editListingId").value = listing.id;
            document.getElementById("editName").value = listing.name;
            // For location assume "City, Area"
            document.getElementById("editLocation").value = listing.city + ", " + listing.area;
            // Set dropdown value for PG type (editType dropdown)
            document.getElementById("editType").value = listing.type;
            document.getElementById("editRooms").value = listing.rooms;
            document.getElementById("editRent").value = listing.rent;
            document.getElementById("editStatus").value = listing.status;
            // Display the modal
            document.getElementById("editModal").style.display = "block";
          }
        
          // Close modal when clicking close button
          document.getElementById("closeModal").addEventListener("click", function () {
            document.getElementById("editModal").style.display = "none";
          });
        
          // Save changes from the edit modal
          document.getElementById("saveEditBtn").addEventListener("click", async function () {
            const id = document.getElementById("editListingId").value;
            const name = document.getElementById("editName").value.trim();
            const location = document.getElementById("editLocation").value.trim();
            const type = document.getElementById("editType").value;  // from dropdown
            const rooms = parseInt(document.getElementById("editRooms").value);
            const rent = parseFloat(document.getElementById("editRent").value);
            const status = document.getElementById("editStatus").value.trim();
        
            // Split location into city and area parts (assuming "City, Area")
            let [city, area] = location.split(",").map(s => s.trim());
            if (!city) city = "";
            if (!area) area = "";
        
            const payload = {
              id,
              name,
              city,
              area,
              type,
              rooms,
              rent,
              status
            };
        
            try {
              const response = await fetch("backend/pg/update_pg.php", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(payload)
              });
              const result = await response.text();
              if (result.includes("success")) {
                alert("Listing updated successfully.");
                document.getElementById("editModal").style.display = "none";
                loadListings();
              } else {
                alert("Error updating listing: " + result);
              }
            } catch (error) {
              alert("Error updating listing: " + error.message);
            }
          });
        
          // ===============================
          // 8. Initial Load of Listings
          // ===============================
          loadListings();
        });
        </script>
        
        <script>
          document.addEventListener("DOMContentLoaded", () => {
            // Fetch the user’s name (profile → users fallback)
            fetch("backend/user/get_user_profile.php")
              .then(res => res.json())
              .then(js => {
                const name = (js.full_name || "").trim();
                if (!name) return;                // nothing to do if blank
                const first = name.split(" ")[0];  // first name
                const initial = name.charAt(0).toUpperCase();
          
                // 1) Update navbar greeting
                const greetEl = document.getElementById("greeting-name");
                if (greetEl) greetEl.textContent = `Hi, ${first}`;
          
                // 2) Update profile‐card name
                const profName = document.getElementById("profileName");
                if (profName) profName.textContent = name;
          
                // 3) Update both avatars with the initial
                ["userAvatar", "userAvatarNav"].forEach(id => {
                  const el = document.getElementById(id);
                  if (el) el.textContent = initial;
                });
              })
              .catch(err => console.error("Greeting load error:", err));
          });
          </script>
          
          
        
        
      <!----------------------------------------->
</body>
</html>
